<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Exadata | amardeepsidhu.com</title><meta name=keywords content><meta name=description content><meta name=author content="Amardeep Sidhu"><link rel=canonical href=https://amardeepsidhu.com/tags/exadata/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://amardeepsidhu.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://amardeepsidhu.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://amardeepsidhu.com/favicon-32x32.png><link rel=apple-touch-icon href=https://amardeepsidhu.com/apple-touch-icon.png><link rel=mask-icon href=https://amardeepsidhu.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://amardeepsidhu.com/tags/exadata/index.xml><link rel=alternate hreflang=en href=https://amardeepsidhu.com/tags/exadata/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://amardeepsidhu.com/tags/exadata/"><meta property="og:site_name" content="amardeepsidhu.com"><meta property="og:title" content="Exadata"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Exadata"><meta name=twitter:description content><script data-goatcounter=https://amardeepsidhu.goatcounter.com/count async src=//gc.zgo.at/count.js></script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://amardeepsidhu.com/ accesskey=h title="amardeepsidhu.com (Alt + H)">amardeepsidhu.com</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://amardeepsidhu.com/blog/ title="Oracle blog"><span>Oracle blog</span></a></li><li><a href=https://amardeepsidhu.com/personal/ title="Personal blog"><span>Personal blog</span></a></li><li><a href=https://amardeepsidhu.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://amardeepsidhu.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://amardeepsidhu.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://amardeepsidhu.com/archive/ title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Exadata</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Adding a new cell to Exadata with asm scoped security enabled</h2></header><div class=entry-content><p>A customer is using an Exadata X8M-2 machine with multiple VMs (hence multiple clusters). I was working on adding a new storage cell to the configuration. After creating griddisks on the new cell and updating cellip.ora on all the VMs, I noticed that none of the clusters was able to see the new griddisks. I checked the usual suspects like if asm_diskstring was set properly, private network subnet mask on new cell was same as the old ones. All looked good. I started searching about the issue and stumbled upon some references mentioning ASM scoped security. I checked on one of the existing cells and that actually was the issue. The existing nodes had it enabled while the new one hadn’t. Running this command on an existing cell
...</p></div><footer class=entry-footer><span title='2022-05-09 13:26:00 +0530 +0530'>May 9, 2022 at 1:26 PM</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;555 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to Adding a new cell to Exadata with asm scoped security enabled" href=https://amardeepsidhu.com/blog/2022/05/adding-a-new-cell-to-exadata-with-asm-scoped-security-enabled/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Smokescreen detects traffic from an Exadata VM</h2></header><div class=entry-content><p>A customer who is using an Exadata X8M-2 with multiple VMs had Smokescreen deployed in their company recently and they reported an issue that one of the Smokescreen decoy servers in their DC was seeing traffic from one of the Exadata VMs on a certain port. That was rather confusing as that port was the database listener port on that VM and why would a VM with Oracle RAC deployed try to access any random IP on the listener port. Also it was happening only for this VM. Nothing for so many other VMs.
...</p></div><footer class=entry-footer><span title='2022-03-21 19:30:16 +0530 +0530'>March 21, 2022 at 7:30 PM</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;182 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to Smokescreen detects traffic from an Exadata VM" href=https://amardeepsidhu.com/blog/2022/03/smokescreen-detects-traffic-from-an-exadata-vm/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>File system already present at specified mount point /dbfs_direct</h2></header><div class=entry-content><p>It was actually funny. So thought about posting it that sometimes how we can miss the absolute basics. This customer is using a virtualized Exadata with multiple VMs. One VM hosts the database meant to be used for dbfs and another VM connects to this DB over IB to mount dbfs file system using dbfs_client. One day VMs were rebooted and due to some reason the dbfs filesystem didn’t mount on startup. It went on for few days and they couldn’t mount it. One day I got a chance to look at it and the error they were facing was:
...</p></div><footer class=entry-footer><span title='2021-06-05 20:19:37 +0530 +0530'>June 5, 2021 at 8:19 PM</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;248 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to File system already present at specified mount point /dbfs_direct" href=https://amardeepsidhu.com/blog/2021/06/file-system-already-present-at-specified-mount-point-dbfs_direct/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Doing an Exadata mixed cells config with OEDA</h2></header><div class=entry-content><p>Earlier versions of OEDA didn’t allow you to have mixed cells in the configuration i.e. High Capacity (HC) and Extreme Flash (EF). The way to deal with that configuration was that deploy the system with either HC or EF cells and then manually configure the remaining cells.
I am not sure when did it change but the newer versions allow you have mixed type of cells in a single OEDA configuration. Once you select the hardware, there is an additional option called Enable Additional Storage, where you can select the other type of cells. The minimum number of cells has to be three to use this option. Also the cells that are at the bottom of the rack physically should be selected as main storage and the other cells should be added as additional storage as that is how OEDA builds the configuration files.
...</p></div><footer class=entry-footer><span title='2020-10-27 18:53:37 +0530 +0530'>October 27, 2020 at 6:53 PM</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;285 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to Doing an Exadata mixed cells config with OEDA" href=https://amardeepsidhu.com/blog/2020/10/doing-an-exadata-mixed-cells-config-with-oeda/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>PRVF-4657 : Name resolution setup check for “db-scan” (IP address: x.x.x.101) failed</h2></header><div class=entry-content><p>A quick note about an error I faced while running root.sh on an Exadata machine. The configuration tools failed with the following error:
Error is PRVF-4657 : Name resolution setup check for "db-scan" (IP address: x.x.x.101) failed I did nslookup on the scan name and it all seemed good. So why the error ? After spending another 5 minutes, I looked at /etc/hosts and there was it. Someone had populated /etc/hosts of DB nodes with all the hostnames entries including the scan name. Something like:
...</p></div><footer class=entry-footer><span title='2020-09-25 19:41:28 +0530 +0530'>September 25, 2020 at 7:41 PM</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;145 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to PRVF-4657 : Name resolution setup check for “db-scan” (IP address: x.x.x.101) failed" href=https://amardeepsidhu.com/blog/2020/09/prvf-4657-name-resolution-setup-check-for-db-scan-ip-address-x-x-x-101-failed/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Using Secure Fabric for network isolation in KVM environments on Exadata</h2></header><div class=entry-content><p>Exadata storage software version 20.1 introduces a new feature called “Secure Fabric” for KVM based multi cluster deployments (Exadata X8M). It enables network isolation between multiple tenants (i.e. KVM VMs based RAC clusters). This feature aligns with Infiniband Partitioning on OVM based systems. There are customers who in such scenarios want that VMs of one RAC shouldn’t be able to see traffic of the other RAC VMs. This feature achieves that. Similar to Pkeys in IB switches, here it uses a double VLAN tagging system where the first tag identiefies the network partition and the second tag is used to denote membership level of the VM. Exadata documention has more details.
...</p></div><footer class=entry-footer><span title='2020-07-17 21:21:03 +0530 +0530'>July 17, 2020 at 9:21 PM</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;215 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to Using Secure Fabric for network isolation in KVM environments on Exadata" href=https://amardeepsidhu.com/blog/2020/07/using-secure-fabric-for-network-isolation-in-kvm-environments-on-exadata/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Exadata Virtualized DB node restore</h2></header><div class=entry-content><p>There are two common scenarios when we may need this:
An existing DB node has crashed and is unrecoverable (due to some failure and non-availability of any backups. Though some of the things may need to be done even if the backups were available). We have an existing Exadata rack that is virtualized. Now there is a new DB node and the existing clusters need to be extended to include the VMs on this new node. I recently faced the first scenario where a virtualized DB node crashed and wasn’t recoverable. A bare metal DB node restore is a relatively simple procedure where we just have to reimage the node, create the needed directories, users etc and add it to the RAC cluster. In case of virtualization, the creation of VMs is an additional step that needs to be done. That makes it slightly more complex.
...</p></div><footer class=entry-footer><span title='2020-05-11 21:31:43 +0530 +0530'>May 11, 2020 at 9:31 PM</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;918 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to Exadata Virtualized DB node restore" href=https://amardeepsidhu.com/blog/2020/05/exadata-virtualized-db-node-restore/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>dbnodeupdate.sh appears to be stuck</h2></header><div class=entry-content><p>I was patching an Exadata db node from 18.1.5.0.0.180506 to 19.3.2.0.0.191119. It had been more than an hour and dbnodeupdate.sh appeared to be stuck. Trying to ssh to the node was giving “connection refused” and the console had this output (some output removed for brevity):
[ 458.006444] upgrade[8876]: [642/676] (72%) installing exadata-sun-computenode-19.3.2.0.0.191119-1...
&lt;>
[ 459.991449] upgrade[8876]: Created symlink /etc/systemd/system/multi-user.target.wants/exadata-iscsi-reconcile.service, pointing to /etc/systemd/system/exadata-iscsi-reconcile.service.
[ 460.011466] upgrade[8876]: Looking for unit files in (higher priority first):
[ 460.021436] upgrade[8876]: /etc/systemd/system
[ 460.028479] upgrade[8876]: /run/systemd/system
[ 460.035431] upgrade[8876]: /usr/local/lib/systemd/system
[ 460.042429] upgrade[8876]: /usr/lib/systemd/system
[ 460.049457] upgrade[8876]: Looking for SysV init scripts in:
[ 460.057474] upgrade[8876]: /etc/rc.d/init.d
[ 460.064430] upgrade[8876]: Looking for SysV rcN.d links in:
[ 460.071445] upgrade[8876]: /etc/rc.d
[ 460.076454] upgrade[8876]: Looking for unit files in (higher priority first):
[ 460.086461] upgrade[8876]: /etc/systemd/system
[ 460.093435] upgrade[8876]: /run/systemd/system
[ 460.100433] upgrade[8876]: /usr/local/lib/systemd/system
[ 460.107474] upgrade[8876]: /usr/lib/systemd/system
[ 460.114432] upgrade[8876]: Looking for SysV init scripts in:
[ 460.122455] upgrade[8876]: /etc/rc.d/init.d
[ 460.129458] upgrade[8876]: Looking for SysV rcN.d links in:
[ 460.136468] upgrade[8876]: /etc/rc.d
[ 460.141451] upgrade[8876]: Created symlink /etc/systemd/system/multi-user.target.wants/exadata-multipathmon.service, pointing to /etc/systemd/system/exadata-multipathmon.service. There was not much that I could do so just waited. Also created an SR with Oracle Support and they also suggested to wait. It started moving after some time and completed successfully. Finally when the node came up, i checked that there was an NFS mount entry in /etc/rc.local and that was what created the problem. For the second node, we commented this out and it was all smooth. Important to comment out all NFS entries during patching to avoid all such issues. I had commented the ones in /etc/fstab but the one in rc.local was an unexpected one.
...</p></div><footer class=entry-footer><span title='2019-12-21 06:37:33 +0530 +0530'>December 21, 2019 at 6:37 AM</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;277 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to dbnodeupdate.sh appears to be stuck" href=https://amardeepsidhu.com/blog/2019/12/dbnodeupdate-sh-appears-to-be-stuck/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Understanding grid disks in Exadata</h2></header><div class=entry-content><p>Use of Exadata storage cells seems to be a very poorly understood concept. A lot of people have confusions about how exactly ASM makes uses of disks from storage cells. Many folks assume there is some sort of RAID configured in the storage layer whereas there is nothing like that. I will try to explain some of the concepts in this post.
Let’s take an example of an Exadata quarter rack that has 2 db and 3 storage nodes (node means a server here). Few things to note:
...</p></div><footer class=entry-footer><span title='2019-02-18 18:37:25 +0530 +0530'>February 18, 2019 at 6:37 PM</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;564 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to Understanding grid disks in Exadata" href=https://amardeepsidhu.com/blog/2019/02/understanding-grid-disks-in-exadata/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>dbca doesn’t list diskgroups</h2></header><div class=entry-content><p>This is an Exadata machine running GI version 18.3.0.0.180717 and DB version 12.1.0.2.180717. On one of the DB nodes while running dbca, it doesn’t list the diskgroups. it works fine on the other node.
I cheked the dbca trace and found that the kfod command was failing. I tried to run it manually and got the same error:
[oracle@exadb01 ~]$ /u01/app/18.0.0.0/grid/bin/kfod op=groups verbose=true
KFOD-00300: OCI error [-1] [OCI error] [Could not fetch details] [-105777048]
KFOD-00105: Could not open pfile 'init@.ora'
[oracle@exadb01 ~]$ I ran it with strace then:
...</p></div><footer class=entry-footer><span title='2018-12-26 21:01:20 +0530 +0530'>December 26, 2018 at 9:01 PM</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;410 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to dbca doesn’t list diskgroups" href=https://amardeepsidhu.com/blog/2018/12/dbca-doesnt-list-diskgroups/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://amardeepsidhu.com/tags/exadata/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://amardeepsidhu.com/>amardeepsidhu.com</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>