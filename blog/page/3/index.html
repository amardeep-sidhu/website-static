<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Amardeep Sidhu's Tech blog | amardeepsidhu.com</title><meta name=keywords content><meta name=description content="Amardeep Sidhu's Tech blog - amardeepsidhu.com"><meta name=author content="Amardeep Sidhu"><link rel=canonical href=https://amardeepsidhu.com/blog/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://amardeepsidhu.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://amardeepsidhu.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://amardeepsidhu.com/favicon-32x32.png><link rel=apple-touch-icon href=https://amardeepsidhu.com/apple-touch-icon.png><link rel=mask-icon href=https://amardeepsidhu.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://amardeepsidhu.com/blog/index.xml><link rel=alternate hreflang=en href=https://amardeepsidhu.com/blog/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://amardeepsidhu.com/blog/"><meta property="og:site_name" content="amardeepsidhu.com"><meta property="og:title" content="Amardeep Sidhu's Tech blog"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Amardeep Sidhu's Tech blog"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Amardeep Sidhu's Tech blog","item":"https://amardeepsidhu.com/blog/"}]}</script><script data-goatcounter=https://amardeepsidhu.goatcounter.com/count async src=//gc.zgo.at/count.js></script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://amardeepsidhu.com/ accesskey=h title="amardeepsidhu.com (Alt + H)">amardeepsidhu.com</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://amardeepsidhu.com/blog/ title="Tech blog"><span class=active>Tech blog</span></a></li><li><a href=https://amardeepsidhu.com/personal/ title="Personal blog"><span>Personal blog</span></a></li><li><a href=https://amardeepsidhu.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://amardeepsidhu.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://amardeepsidhu.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://amardeepsidhu.com/archive/ title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Amardeep Sidhu's Tech blog</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Exadata Virtualized DB node restore</h2></header><div class=entry-content><p>There are two common scenarios when we may need this:
An existing DB node has crashed and is unrecoverable (due to some failure and non-availability of any backups. Though some of the things may need to be done even if the backups were available). We have an existing Exadata rack that is virtualized. Now there is a new DB node and the existing clusters need to be extended to include the VMs on this new node. I recently faced the first scenario where a virtualized DB node crashed and wasn’t recoverable. A bare metal DB node restore is a relatively simple procedure where we just have to reimage the node, create the needed directories, users etc and add it to the RAC cluster. In case of virtualization, the creation of VMs is an additional step that needs to be done. That makes it slightly more complex.
...</p></div><footer class=entry-footer><span title='2020-05-11 21:31:43 +0530 +0530'>May 11, 2020 at 9:31 PM</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;918 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to Exadata Virtualized DB node restore" href=https://amardeepsidhu.com/blog/2020/05/exadata-virtualized-db-node-restore/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>dbnodeupdate.sh appears to be stuck</h2></header><div class=entry-content><p>I was patching an Exadata db node from 18.1.5.0.0.180506 to 19.3.2.0.0.191119. It had been more than an hour and dbnodeupdate.sh appeared to be stuck. Trying to ssh to the node was giving “connection refused” and the console had this output (some output removed for brevity):
[ 458.006444] upgrade[8876]: [642/676] (72%) installing exadata-sun-computenode-19.3.2.0.0.191119-1...
&lt;>
[ 459.991449] upgrade[8876]: Created symlink /etc/systemd/system/multi-user.target.wants/exadata-iscsi-reconcile.service, pointing to /etc/systemd/system/exadata-iscsi-reconcile.service.
[ 460.011466] upgrade[8876]: Looking for unit files in (higher priority first):
[ 460.021436] upgrade[8876]: /etc/systemd/system
[ 460.028479] upgrade[8876]: /run/systemd/system
[ 460.035431] upgrade[8876]: /usr/local/lib/systemd/system
[ 460.042429] upgrade[8876]: /usr/lib/systemd/system
[ 460.049457] upgrade[8876]: Looking for SysV init scripts in:
[ 460.057474] upgrade[8876]: /etc/rc.d/init.d
[ 460.064430] upgrade[8876]: Looking for SysV rcN.d links in:
[ 460.071445] upgrade[8876]: /etc/rc.d
[ 460.076454] upgrade[8876]: Looking for unit files in (higher priority first):
[ 460.086461] upgrade[8876]: /etc/systemd/system
[ 460.093435] upgrade[8876]: /run/systemd/system
[ 460.100433] upgrade[8876]: /usr/local/lib/systemd/system
[ 460.107474] upgrade[8876]: /usr/lib/systemd/system
[ 460.114432] upgrade[8876]: Looking for SysV init scripts in:
[ 460.122455] upgrade[8876]: /etc/rc.d/init.d
[ 460.129458] upgrade[8876]: Looking for SysV rcN.d links in:
[ 460.136468] upgrade[8876]: /etc/rc.d
[ 460.141451] upgrade[8876]: Created symlink /etc/systemd/system/multi-user.target.wants/exadata-multipathmon.service, pointing to /etc/systemd/system/exadata-multipathmon.service. There was not much that I could do so just waited. Also created an SR with Oracle Support and they also suggested to wait. It started moving after some time and completed successfully. Finally when the node came up, i checked that there was an NFS mount entry in /etc/rc.local and that was what created the problem. For the second node, we commented this out and it was all smooth. Important to comment out all NFS entries during patching to avoid all such issues. I had commented the ones in /etc/fstab but the one in rc.local was an unexpected one.
...</p></div><footer class=entry-footer><span title='2019-12-21 06:37:33 +0530 +0530'>December 21, 2019 at 6:37 AM</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;277 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to dbnodeupdate.sh appears to be stuck" href=https://amardeepsidhu.com/blog/2019/12/dbnodeupdate-sh-appears-to-be-stuck/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>AVDF installation error</h2></header><div class=entry-content><p>I was installing Database Firewall version 12.2.0.11.0 on a Dell x86 machine (with 5 * 500 GB local HDDs configured in RAID 10) and it got successfully installed. Later on, I came to know that this version doesn’t support host monitor functionality on Windows hosts. The latest version that supports that is 12.2.0.10.0. So that was the time to download and install 12.2.0.10.0. The installation started fine but it failed with an error:
...</p></div><footer class=entry-footer><span title='2019-12-05 20:18:12 +0530 +0530'>December 5, 2019 at 8:18 PM</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;145 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to AVDF installation error" href=https://amardeepsidhu.com/blog/2019/12/avdf-installation-error/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>OGB Appreciation Day : Thank you community ! (#ThanksOGB)</h2></header><div class=entry-content><p>It was started by Tim Hall in 2016. This is a Thank you community post. There are so many experts posting on Oracle related forums, doing blog posts, sharing their scripts with everyone. All of you are doing a great job. I would like to mention three names especially:
Tim Hall : Tim is a legend ! I don’t consider something a new feature until Tim writes about it :D
Jonathan Lewis : I don’t think there is anyone on this planet who has even once worked on a performance problem and hasn’t gained something from the knowledge shared by him on forums or in one of the blog posts.
...</p></div><footer class=entry-footer><span title='2019-10-10 19:40:04 +0530 +0530'>October 10, 2019 at 7:40 PM</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;142 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to OGB Appreciation Day : Thank you community ! (#ThanksOGB)" href=https://amardeepsidhu.com/blog/2019/10/ogb-appreciation-day-thank-you-community-thanksogb/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Understanding grid disks in Exadata</h2></header><div class=entry-content><p>Use of Exadata storage cells seems to be a very poorly understood concept. A lot of people have confusions about how exactly ASM makes uses of disks from storage cells. Many folks assume there is some sort of RAID configured in the storage layer whereas there is nothing like that. I will try to explain some of the concepts in this post.
Let’s take an example of an Exadata quarter rack that has 2 db and 3 storage nodes (node means a server here). Few things to note:
...</p></div><footer class=entry-footer><span title='2019-02-18 18:37:25 +0530 +0530'>February 18, 2019 at 6:37 PM</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;564 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to Understanding grid disks in Exadata" href=https://amardeepsidhu.com/blog/2019/02/understanding-grid-disks-in-exadata/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ORA-04080: trigger ‘PRICE_HISTORY_TRIGGERV1’ does not exist</h2></header><div class=entry-content><p>It is actually a dumb one. I was disabling triggers in a schema and ran this SQL to generate the disable statements. (Example from here)
HR@test> select 'alter trigger '||trigger_name|| ' disable;' from user_triggers where table_name='PRODUCT';
'ALTERTRIGGER'||TRIGGER_NAME||'DISABLE;'
--------------------------------------------------------------------------------
alter trigger PRICE_HISTORY_TRIGGERv1 disable;
HR@test> alter trigger PRICE_HISTORY_TRIGGERv1 disable;
alter trigger PRICE_HISTORY_TRIGGERv1 disable
*
ERROR at line 1:
ORA-04080: trigger 'PRICE_HISTORY_TRIGGERV1' does not exist
HR@test> WTF ? It is there but the disable didn’t work. I was in hurry, tried to connect through SQL developer and disable and it worked ! Double WTF ! Then i spotted the problem. Someone created it with one letter in the name in small. So to make it work, we need to use double quotes.
...</p></div><footer class=entry-footer><span title='2019-01-22 19:15:51 +0530 +0530'>January 22, 2019 at 7:15 PM</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;143 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to ORA-04080: trigger ‘PRICE_HISTORY_TRIGGERV1’ does not exist" href=https://amardeepsidhu.com/blog/2019/01/ora-04080-trigger-price_history_triggerv1-does-not-exist/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Error while running ggsci</h2></header><div class=entry-content><p>This was another issue that I faced while trying to configure GoldenGate in HA mode. ggsci was working fine after normal installation but after configuring it in HA mode and trying to run ggsci, it resulted in this:
[oragg@node2 product]$ ggsci
Oracle GoldenGate Command Interpreter for Oracle
Version 12.3.0.1.4 OGGCORE_12.3.0.1.0_PLATFORMS_180415.0359_FBO
Linux, x64, 64bit (optimized), Oracle 12c on Apr 16 2018 00:53:30
Operating system character set identified as UTF-8.
Copyright (C) 1995, 2018, Oracle and/or its affiliates. All rights reserved.
2019-01-08 16:28:37.913
CLSD: An error occurred while attempting to generate a full name. Logging may not be active for this process
Additional diagnostics: CLSU-00100: operating system function: sclsdgcwd failed with error data: -1
CLSU-00103: error location: sclsdgcwd2
(:CLSD00183:)
GGSCI (node2) 1> No obvious clues in the error message but little searching revealed that it had something to do with permissions. It was on Exadata so i tried to do a strace of ggsci and see if it could give some clues. There we go:
...</p></div><footer class=entry-footer><span title='2019-01-12 19:51:49 +0530 +0530'>January 12, 2019 at 7:51 PM</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;254 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to Error while running ggsci" href=https://amardeepsidhu.com/blog/2019/01/error-while-running-ggsci/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Failed to execute the command “”/u01/app/xag/bin/clsecho”</h2></header><div class=entry-content><p>I was configuring GoldenGate in HA mode by following this document. Everything worked ok but in the end while running agctl config goldengate to view the configuration of GoldenGate resource, it was failing with the following error:
[oracle@exadatadb02 ~]$ agctl config goldengate GG_TARGET
Failed to execute the command ""/u01/app/xag/bin/clsecho" -p xag -f xag -m 5080 "GG_TARGET"" (rc=134), with the message:
Oracle Clusterware infrastructure fatal error in clsecho.bin (OS PID 126367_140570897783808): Internal error (ID (:CLSB00107:)) - Error -1 (ORA-08275) determining Oracle base
/u01/app/xag/bin/clsecho: line 45: 126367 Aborted (core dumped) ${CRS_HOME}/bin/clsecho.bin "$@"
Failed to execute the command ""/u01/app/xag/bin/clsecho" -p xag -f xag -m 5081 "/u01/app/oragg/product"" (rc=134), with the message: If you look at the error in bold it sounds kinda obvious that it is not able to figure our where the ORACLE_BASE is. But somehow it didn’t strike me at that moment. So started looking around. If we look at the command it is running, it runs clsecho. This is simply a shell script which in turn calls $CRS_HOME/bin/clsecho.bin . In the script, it sets various environment variables and that is where the problem was. There are lines like:
...</p></div><footer class=entry-footer><span title='2019-01-08 22:52:14 +0530 +0530'>January 8, 2019 at 10:52 PM</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;241 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to Failed to execute the command “”/u01/app/xag/bin/clsecho”" href=https://amardeepsidhu.com/blog/2019/01/failed-to-execute-the-command-u01-app-xag-bin-clsecho/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>dbca doesn’t list diskgroups</h2></header><div class=entry-content><p>This is an Exadata machine running GI version 18.3.0.0.180717 and DB version 12.1.0.2.180717. On one of the DB nodes while running dbca, it doesn’t list the diskgroups. it works fine on the other node.
I cheked the dbca trace and found that the kfod command was failing. I tried to run it manually and got the same error:
[oracle@exadb01 ~]$ /u01/app/18.0.0.0/grid/bin/kfod op=groups verbose=true
KFOD-00300: OCI error [-1] [OCI error] [Could not fetch details] [-105777048]
KFOD-00105: Could not open pfile 'init@.ora'
[oracle@exadb01 ~]$ I ran it with strace then:
...</p></div><footer class=entry-footer><span title='2018-12-26 21:01:20 +0530 +0530'>December 26, 2018 at 9:01 PM</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;410 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to dbca doesn’t list diskgroups" href=https://amardeepsidhu.com/blog/2018/12/dbca-doesnt-list-diskgroups/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>New web based OEDA for Exadata</h2></header><div class=entry-content><p>It started with an xls sheet (that was called dbm configurator) . Then OEDA (Oracle Exadata Deployment Assistant) was introduced that was a Java based GUI tool to enter all the information needed to configure an Exadata machine. Now with the latest patch released in Oct, OEDA has changed again; to become a web based tool. It is deployed on WebLogic and comes with some new features as well. SuperCluster deployments will continue to use the Java based OEDA tool. The new interface has support for Exadata, ZDLRA and ExaCC. It is backward compatible and can import the XMLs generated by older versions of OEDA. Some of the new features include the ability to configure single instance homes, create more than 2 diskgroups, create more than 1 database homes and databases, allow ILOMs to have a different subnet etc.
...</p></div><footer class=entry-footer><span title='2018-11-21 14:47:18 +0530 +0530'>November 21, 2018 at 2:47 PM</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;219 words&nbsp;·&nbsp;Amardeep Sidhu</footer><a class=entry-link aria-label="post link to New web based OEDA for Exadata" href=https://amardeepsidhu.com/blog/2018/11/new-web-based-oeda-for-exadata/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://amardeepsidhu.com/blog/page/2/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://amardeepsidhu.com/blog/page/4/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://amardeepsidhu.com/>amardeepsidhu.com</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>